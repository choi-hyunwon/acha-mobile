<!DOCTYPE HTML>
<html lang="ko">
@@include('../include/head.html')

<body>
    <div class="wrap renewal">
        <div class="header">
            <a href="#" class="sprite btn_back"></a>
            <h2>공동 가계부 분석</h2>
        </div>

        <div class="contents expenditure share-add">
            <div class="current-month current-month-manage report mb-0">
                <a href="#">2023년 9월<i class="icon-arrow-bottom"></i></a>
                <a href="#" class="btn btn-edit">
                    <img src="../../img/sprite/common/ico_input_calendar@2x.png" width="16" height="16" alt="캘린더아이콘">
                    캘린더
                </a>
            </div>
            
            <div class="period">
                <p>기간</p>
                <span class="start">8.25</span>~<span class="end">9.24</span>
            </div>
    
            <div class="manage-content mt-10">
                <div class="month-flow">
                    <div class="title-wrap">
                        <p class="desc">월별 수입·지출 추이</p>
                        <p class="title">
                            지난달보다 수입이 <span class="color-blue">0원</span> 늘고<br />
                            지출이 <span class="color-red">1,500,000원</span> 늘었어요!
                        </p>
                    </div>
    
                    <div class="chart-box">
                        <ul class="chart-month">
                            <li class="item">
                                <div class="graph">
                                    <div class="income" style="height: 30%"></div>
                                    <div class="expense" style="height: 40%"></div>
                                </div>
                                <p class="month">6월</p>
                            </li>
                            <li class="item">
                                <div class="graph">
                                    <div class="income" style="height: 55%"></div>
                                    <div class="expense" style="height: 20%"></div>
                                </div>
                                <p class="month">7월</p>
                            </li>
                            <li class="item">
                                <div class="graph">
                                    <div class="income" style="height: 50%"></div>
                                    <div class="expense" style="height: 65%"></div>
                                </div>
                                <p class="month">8월</p>
                            </li>
                            <li class="item active">
                                <div class="graph">
                                    <div class="income" style="height: 1%"></div>
                                    <div class="expense" style="height: 40%"></div>
                                </div>
                                <p class="month">9월</p>
                            </li>
                            <li class="item">
                                <div class="graph">
                                    <div class="income" style="height: 80%"></div>
                                    <div class="expense" style="height: 70%"></div>
                                </div>
                                <p class="month">10월</p>
                            </li>
                        </ul>
                    </div>
                    <!-- 월별 클릭 했을경우 on off -->
                    <div class="chart-month-details">
                        <i class="arrow-top"></i>
                        <div class="budget-box">
                            <div class="income">
                                <div class="top">
                                    <i class="obj"></i>
                                    <p>수입</p>
                                </div>
                                <div class="value">
                                    0<span>원</span>
                                </div>
                            </div>
                            <div class="expense">
                                <div class="top">
                                    <i class="obj"></i>
                                    <p>지출</p>
                                </div>
                                <div class="value">
                                    - 1,500,000<span>원</span>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="remain">
                                <p>남은 돈 <img src="../../img/common/ico_tooltip_big@2x.png" width="16" height="16"
                                        alt="tooltip-large"></p>
                                <div class="value">- 1,500,000<span>원</span></div>
                            </div>
                            <div class="_Slider swiper swiper-container">
                                <div class="swiper-wrapper">
                                    <div class="swiper-slide">
                                        <div class="graph-box income">
                                            <p class="title">수입</p>
                                            <!-- 데이터가 없을 경우 -->
                                            <div class="empty">
                                                <div class="doughnut"></div>
                                            </div>
                                            <div style="display: none;">
                                                <div class="chart-box doughnut">
                                                    <canvas id="canvas-income" width="100" height="100"></canvas>
                                                </div>
                                                <script>
                                                    const canvas_1 = document.getElementById('canvas-income').getContext('2d');
    
                                                    const config_1 = new Chart(canvas_1, {
                                                        type: 'doughnut',
                                                        plugins: [ChartDataLabels],
                                                        data: {
                                                            labels: ['김꼼꼼', '유똑똑',],
                                                            datasets: [{
                                                                label: '수입',
                                                                data: [60, 40],
                                                                backgroundColor: ['#4c6ae8', '#21389a'],
                                                                borderColor: ['#4c6ae8', '#21389a'],
                                                            }]
                                                        },
                                                        options: {
                                                            cutout: '30%',
                                                            plugins: {
                                                                legend: {
                                                                    display: false,
                                                                },
                                                                datalabels: {
                                                                    display: true,
                                                                    color: '#fff',
                                                                    formatter: function (value, context) {
                                                                        return value + '%';
                                                                    },
                                                                },
                                                            },
                                                        },
                                                    });
                                                </script>
                                            </div>
    
                                            <div class="info-box">
                                                <div class="user">
                                                    <div class="left">
                                                        <i class="icon-user me">
                                                            <img src="../../img/common/ico_mypage_profile_img01@2x.png"
                                                                alt="아이콘">
                                                        </i>
                                                        <div class="name">
                                                            김꼼꼼
                                                            <span class="per">0%</span>
                                                        </div>
                                                    </div>
                                                    <div class="value">
                                                        0<span>원</span>
                                                    </div>
                                                </div>
                                                <div class="user">
                                                    <div class="left">
                                                        <i class="icon-user you">
                                                            <img src="../../img/common/ico_mypage_profile_img01@2x.png"
                                                                alt="아이콘">
                                                        </i>
                                                        <div class="name">
                                                            유똑똑
                                                            <span class="per">0%</span>
                                                        </div>
                                                    </div>
                                                    <div class="value">
                                                        0<span>원</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="swiper-slide">
                                        <div class="graph-box expense">
                                            <p class="title">지출</p>
                                            <!-- 데이터가 없을 경우 -->
                                            <div class="empty">
                                                <div class="doughnut"></div>
                                            </div>
                                            <!-- 데이터가 있을 경우 -->
                                            <div style="display: none;">
                                                <div class="chart-box doughnut">
                                                    <canvas id="canvas-expense_2" height="165"></canvas>
                                                </div>
                                                <script>
                                                    const canvas_2 = document.getElementById('canvas-expense_2').getContext('2d');
    
                                                    const config_2 = new Chart(canvas_2, {
                                                        type: 'doughnut',
                                                        plugins: [ChartDataLabels],
                                                        data: {
                                                            labels: ['김꼼꼼', '유똑똑',],
                                                            datasets: [{
                                                                label: '수입',
                                                                data: [40, 60],
                                                                backgroundColor: ['#b42b50', '#f4507c'],
                                                                borderColor: ['#b42b50', '#f4507c'],
                                                            }]
                                                        },
                                                        options: {
                                                            cutout: '30%',
                                                            plugins: {
                                                                legend: {
                                                                    display: false,
                                                                },
                                                                datalabels: {
                                                                    display: true,
                                                                    color: '#fff',
                                                                    formatter: function (value, context) {
                                                                        return value + '%';
                                                                    },
                                                                },
                                                            },
                                                        },
                                                    });
                                                </script>
                                            </div>
                                            <div class="info-box">
                                                <div class="user">
                                                    <div class="left">
                                                        <i class="icon-user me">
                                                            <img src="../../img/common/ico_mypage_profile_img01@2x.png"
                                                                alt="아이콘">
                                                        </i>
                                                        <div class="name">
                                                            김꼼꼼
                                                            <span class="per">0%</span>
                                                        </div>
                                                    </div>
                                                    <div class="value">
                                                        0<span>원</span>
                                                    </div>
                                                </div>
                                                <div class="user">
                                                    <div class="left">
                                                        <i class="icon-user you">
                                                            <img src="../../img/common/ico_mypage_profile_img01@2x.png"
                                                                alt="아이콘">
                                                        </i>
                                                        <div class="name">
                                                            유똑똑
                                                            <span class="per">0%</span>
                                                        </div>
                                                    </div>
                                                    <div class="value">
                                                        0<span>원</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
    
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        Chart.register(ChartDataLabels);

        var swiper = new Swiper("._Slider", {
            slidesPerView: "auto",
            spaceBetween: 10,
        });

        // 월별 수입·지출 추이
        $('.chart-month .item').click(function () {
            $(this).addClass('active').siblings().removeClass('active')
            let item = $(this).index()

            switch (item) {
                case 0:
                    $('.arrow-top').css('left', "8%")
                    break;
                case 1:
                    $('.arrow-top').css('left', "26%")
                    break;
                case 2:
                    $('.arrow-top').css('left', "45%")
                    break;
                case 3:
                    $('.arrow-top').css('left', "64%")
                    break;
                case 4:
                    $('.arrow-top').css('left', "84%")
                    break;
            }
        })


        $(".category-list.expense ul li:gt(4)").hide();

        $('.spread-btn').click(function () {
            $bool = $(this).hasClass('active')
            if ($bool) {
                $(this).removeClass('active').text('펼치기 ').append('<i class="ico_list_arrow_small"></i>')
                $(".category-list.expense ul li:gt(4)").hide();
            } else {
                $(this).addClass('active').text('접기').append('<i class="ico_list_arrow_small"></i>')
                $(".category-list.expense ul li").show();
            }
        })


    </script>
</body>

</html>